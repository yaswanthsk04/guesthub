# GuestHub v0.5.0

## Auto-Update System

This version features a self-updating system where all components, including the update system itself, are automatically updated.

### Components Updated
1. Core System:
   - update-checker.py (self-updates)
   - update-executor.sh (updated by checker)
   - update-executor-handler.py (handles executor updates)

2. Regular Files:
   - docker-compose.yml
   - prometheus-config.yml
   - opennds-exporter.py

### Update Flow

1. Checker Self-Update:
```
update-checker.py
├── Detects new version of itself
├── Creates .new file
└── Calls executor.sh
    └── Handles the update
```

2. Executor Update:
```
update-checker.py
├── Detects executor update
├── Creates .new file
└── Calls executor-handler.py
    ├── Backs up old executor
    ├── Moves new into place
    └── Sets permissions
```

3. Regular Updates:
```
update-checker.py
├── Detects changes
├── Creates .new files
└── Calls executor.sh
    ├── Handles backups
    ├── Updates files
    └── Restarts services
```

## Directory Structure
```
/usr/local/monitoring/
├── update-checker.py      # Core update system
├── update-executor.sh     # Update handler
├── update-executor-handler.py
├── docker-compose.yml
├── prometheus/
│   └── prometheus.yml
├── opennds-exporter.py
└── backups/
    └── YYYYMMDD/         # Daily backup folders
```

## Installation
```bash
./setup-script.sh
```

## Monitoring
- Check logs: `/var/log/update-checker.log`
- Updates run every 5 minutes
- Backups in: `/usr/local/monitoring/backups/YYYYMMDD/`

## Note
This version featured self-updating core components. In v0.6.0, this was changed to use numbered update scripts instead, as they provide:
- Better control over update timing
- Safer update process
- No risk of interrupting ongoing updates
- Cleaner separation of concerns
